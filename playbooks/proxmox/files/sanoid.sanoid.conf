# Automatic pruning of datasets coming from syncoid
[buttercup]
  use_template = backup
  recursive = yes
  process_children_only = yes

[rpool]
  use_template = production
  recursive = yes

[rpool/reserved]
  use_template = ignore

[rpool/data/vm-20254-cloudinit]
  use_template = ignore

[rpool/data/vm-20254-disk-0]
  use_template = ignore

[rpool/data/vm-20254-disk-1]
  use_template = ignore

[rpool/data/vm-20254-disk-2]
  use_template = ignore

[rpool/appdata/vm-20254-disk-0]
  use_template = ignore

[rpool/postgres/vm-20254-disk-0]
  use_template = ignore

[rpool/data/subvol-20253-disk-0]
  use_template = ignore

#############################
# templates below this line #
#############################

[template_production]
  frequently = 0
  hourly = 36
  daily = 30
  monthly = 3
  yearly = 0
  autosnap = yes
  autoprune = yes

[template_backup]
  frequently = 0
  hourly = 36
  daily = 90
  monthly = 12
  yearly = 5
  ### don't have sanoid take snapshots as they are coming from syncoid
  autosnap = no
  ### remove outdated snapshots
  autoprune = yes

[template_ignore]
  autoprune = no
  autosnap = no
  monitor = no
